<h1><%= _('User list') %><%= StaticImage::spinner %></h1>

<% links = show_pages_links(@user_pages, _('A new user'),
                     :url => accounts_path) %>
<%= links %>
<table class="show">
  <tr>
    <th><%= _('Login')%></th>
    <th><%= _('Name')%></th>
    <th><%= _('Role')%></th>
    <th><%= _('Engineer')%></th>
    <th><%= _('Recipient')%></th>
    <th><%= _('Email')%></th>
    <th><%= _('Phone')%></th>
  </tr>

  <% options = PagesHelper::AJAX_OPTIONS.dup %>
  <% options[:method] = :put %>
  <% @users.each_index do |i| %>
   <% user = @users[i] %>
   <% beneficiaire = user.beneficiaire %>
   <% ingenieur = user.ingenieur %>
   <tr class="<%= cycle('pair', 'impair') %>">
      <td><%= user.login %></td>
      <td><%= user.nom %></td>
      <td><%= user.role.nom %></td>
      <td><center><%= "X" if ingenieur %></center></td>
      <td><center><%= "X" if beneficiaire %></center></td>
      <td><%= mail_to user.email, user.email %></td>
      <td><%= user.telephone %></td>
     <td><% if beneficiaire and not user.inactive? %>
           <form action=<%= '"' + devenir_account_path(beneficiaire) + '"' %> method="post">
           <input name="commit" value=<%= '"' + _('Become') + '"' %> type="submit" /></form>
         <% end %>
     </td>

      <td><%= link_to_show user %></td>
      <td><%= link_to_edit user %></td>

    </tr>
  <% end %>
</table>

<%= links %>


