<% time = Time.now.hash %>

<% # Add this script to give the focus to the version field in the last software added. %>
<% # Improve usability : allows to use easily this form without touching the mouse %>
<% if @release.nil? %>
<script>
  document.getElementById('software[<%= time %>][version]').focus();
  // Change the value to allow to choose successively the same option
  document.getElementById('select_software').value = "";
</script>
<% end %>

<tr id="<%= @logiciel.id %>">
  <% # default values for a new package are set here %>
  <% @release= Release.new( :release => " ", :inactive => false, :version => Version.new ) if @release.nil?%>
  <td><label for='software[<%= time %>][active]'> <%= @logiciel.name %></label></td>
  <td>
    <input id='software[<%= time %>][version]' name='software[<%= time %>][version]' type=<%= @release.id.nil? ? 'text' : 'hidden' %> value='<%= @release.version.version unless @release.version.nil? %>'>
    <%= @release.version.version unless @release.id.nil? || @release.version.nil? %>
  </td>
  <td>
    <input id='software[<%= time %>][release]' name='software[<%= time %>][release]' type=<%= @release.id.nil? ? 'text' : 'hidden' %> value='<%= @release.release%>'>
    <%= @release.release unless @release.id.nil? %>
  </td>
  <td align='center'>
    <input id='software[<%= time %>][inactive]' name='software[<%= time %>][inactive]' type='checkbox' <%= "checked='yes'" if @release.inactive? %>>
  </td>
  <td>
    <input name='software[<%= time %>][release_id]' type='hidden' value='<%= @release.id %>'>
    <input name='software[<%= time %>][software]' type='hidden' value='<%= @logiciel.id %>'>

   <%= link_to_function(StaticImage::delete, :class => "no_hover" ) { |page|  page.remove @logiciel.id.to_s } unless @release.id && session[:user].role_id != 1 %>
  </td>
</tr>

