<h1><%= _("Supported software in this contract") %></h1>

<% options = { :before => "Element.show('spinner')",
               :success => "Element.hide('spinner')",
               :url => {:action => "ajax_add_software", :controller => "contracts"},
               :with => "select_software.options[select_software.selectedIndex]"
               } %>
<% form_tag( {:action => "add_software"}, :id => "main_form")do %>
<table class="form" cellpadding="5" >
  <tr><th width="70"><%= _('Software') %></th><th><%= _('Version') %></th><th><%= _('Release') %></th><th><%= _('Unsupported')+"?" %></th></tr>
  <% @releases.each do |r| %>
    <% @logiciel = r.logiciel %>
    <% @release = r %>
    <%= render :partial => "contracts/software" %>
  <% end %>
  <tr id="end"></tr>
</table>

<table class="form" cellpadding="5">
  <tr><td>
    <fieldset><legend><%= _('Add software') %></legend>
    <table cellpadding="5">
      <tr><td>
        <label><%=_('Software')%></label></td><td><%= select_empty "select", "software", @logiciels, {}, { :onchange => remote_function(options) } %></td><td width="20"> <%= StaticImage::spinner %>
      </td></tr>
    </table>
    </fieldset>
 </td></tr>
</table>

<input name='id' type='hidden' value='<%= @contract.id %>'>

<table class="form" cellpadding="5">
  <tr><td>
    <%= submit_tag _('Validate') %>
  </td></tr>
</table>
<% end %>
