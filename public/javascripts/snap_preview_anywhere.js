var snap_preview_anywhere_config = {version:"1.19",prefix:{image:"http://spa.snap.com/images/v1.19/",theme:"http://spa.snap.com/images/v1.19/theme/silver/",link:"http://spa.snap.com/",options:"http://spa.snap.com/",preview:"http://spa.snap.com/",spasense:"http://spa.snap.com/",bg:"http://spa.snap.com/images/v1.19/theme/silver/bg/bg_305x270",snap:"http://www.snap.com/",search:"http://images.snap.com/"},theme:"silver",key:"",source:"",flavor:null,search_box:false,auto_preview:true,show_internal:false,platform:false,show_link_icon:"off",preview_trigger:"both",search_type:"image",redirect_param:null,delay:{show:500,hide:150,move:200},text:{search_box:"Search for Images"},img:{cobrand:"http://spa.snap.com/images/v1.19/t.gif",submit:"http://spa.snap.com/images/v1.19/t.gif"},css_pos:{main:{x:0,y:0,w:305,h:270},ether:{x:null,y:null,w:258,h:32},body:{x:0,y:0,w:305,h:192},bg_img:{x:0,y:0,w:305,h:270},url:{x:14,y:4,w:215,h:20},url_a:{x:0,y:0,w:null,h:null},close_a:{x:236,y:7,w:9,h:9},ques_a:{xr:20,y:5,w:null,h:null},preview_div:{x:13,y:24,w:270,h:161},preview:{x:0,y:0,w:null,h:null},loading_img:{x:0,y:0,w:null,h:null},search:{x:13,y:195,w:272,h:30},logo_a:{x:182,y:191,w:107,h:21},box:{x:5,y:5,w:210,h:20},submit:{x:220,y:5,w:46,h:20},cobrand_img:{x:13,y:193,w:null,h:null},cobrand_a:{x:16,y:197,w:102,h:13},options:{x:0,y:0,w:305,h:null},option_a:{xr:20,y:5,w:null,h:null},option_iframe:{x:13,y:21,w:275,h:192},spasense_iframe:{x:13,y:195,w:274,h:32}},style:{ques_a:{fontSize:"10px",fontWeight:"normal",color:"#857a7a",borderBottom:"1px dotted #857a7a",textDecoration:"none"},option_a:{fontSize:"10px",fontWeight:"normal",color:"#857a7a",borderBottom:"1px dotted #857a7a",textDecoration:"none"},url_a:{fontSize:"12px",fontWeight:"bold",color:"#003399",borderBottom:"1px dotted #003399",textDecoration:"none",textAlign:"left"},url:{overflow:"hidden"},preview_div:{border:"2px solid #827874",overflow:"hidden",backgroundColor:"#FFFFFF"},search:{backgroundColor:"#f5f5f6",border:"1px solid #d9ddce"},box:{fontSize:"10px",border:"1px solid #999999",color:"#333333",backgroundColor:"#ffffff"}},offset:{body:{top:40,bottom:10},options:{top:40,bottom:10},search_box:38},hidden:["options","spasense_iframe","search"],retry_interval:[8000,5000,5000,5000,5000,5000],partial_check:{delay:2000,attempts:5},href:{logo:"http://www.snap.com/",cobrand:"http://www.snap.com/about/spa1B.php"},palette:{submit:"-214px 0",cobrand_a:"-260px 0",close_a:"-362px 0",logo_a:"0 0"},ether:{tl:{x:47,y:0},tr:{x:0,y:0},bl:{x:47,y:238},br:{x:0,y:238}},el_scan:"default",color:{bubble:"#ffffff",bubble_rollover:"#fffeee",bubble_border:"#a4a3a3",url:"#003399",url_down:"#ff0000",preview_border:"#827874",preview_border_down:"#ff0000",options:"#857a7a",options_down:"#ff0000",search_box:"#f5f5f6",search_box_border:"#d9ddce",search_field:"#ffffff",search_field_border:"#999999"},fl:""};
function snapPreviewAnywhere(){this.init();}snapPreviewAnywhere.prototype={div:null,timer_id:null,current_orientation:"lr",retry_url_list:{},div_added:null,current_element:null,current_url:null,init:function(){this.div={};this.retry_url_list={};this.timer_id={retry:null,show:null,partial:null};this.div_added=false;this.current_element=null;this.current_url=null;this.domain=null;this.cfg=snap_preview_anywhere_config;var _1=this;this.observe(window,"load",function(){_1.onload();});var _2=document.getElementById("snap_preview_anywhere");if(_2&&_2.defer){this.timer_id.partial=window.setTimeout(function(){_1.partial_check();},this.cfg.partial_check.delay);}},clear_timer:function(_3){if(this.timer_id[_3]){window.clearTimeout(this.timer_id[_3]);this.timer_id[_3]=0;}},campaign:function(_4){return "spa"+(_4?("_"+_4):"")+"!"+window.location.host.replace(/:\d+$/,"");},is_internal_link:function(_5){var _6=/^(http|file)s?:\/\/(www\.)?(.*?)\//;if(this.domain===null){var m=document.location.href.match(_6);if(m){this.domain=m[3];}else{this.domain="";}}var _8=_5.href.match(_6);if(_8&&(this.domain==_8[3])){if(this.cfg.redirect_param){var _9="[\\?&]"+this.cfg.redirect_param+"=([^&#]*)";var _a=new RegExp(_9);var _b=_a.exec(_5.href);if(_b==null){return true;}else{return false;}}else{return true;}}else{return false;}},is_valid_link:function(_c){var _d=_c.href.match(/^(http)s?:\/\/([^#]*)/);var _e=document.location.href.match(/^(http|file)s?:\/\/([^#]*)/);if(!_d||!_e||(_d[2]==_e[2])||(_d[1]!=="http")){return false;}return true;},add_spa:function(_f){var spa=this;_f.snap_preview_added="spa";_f.text_trigger=false;if((this.cfg.show_link_icon=="off"||this.cfg.preview_trigger!="icon"||_f.parent_link_icon=="no"||_f.parent_link_icon=="both"||_f.className.indexOf("snap_no_icon")!=-1||_f.className.indexOf("snap_trigger_both")!=-1)&&_f.className.indexOf("snap_trigger_icon")==-1&&_f.parent_link_icon!="icon"){_f.text_trigger=true;}_f.icon_trigger=false;var _11=/<img[^<>]*>/ig;var _12=spa.trim(_f.innerHTML.replace(_11,""));if((this.cfg.show_link_icon=="on"||_f.className.indexOf("snap_trigger_both")!=-1||_f.className.indexOf("snap_trigger_icon")!=-1||_f.parent_link_icon=="icon"||_f.parent_link_icon=="both")&&_f.className.indexOf("snap_no_icon")==-1&&_f.snap_icon_added!="no"&&_12!=""){_f.icon_trigger=true;}_f.act_suffix="";if(_f.text_trigger&&_f.icon_trigger){_f.act_suffix=2;}if(_f.text_trigger){this.observe(_f,"mouseover",function(ev){spa.show_delay(ev,spa.cfg.delay.show,spa.cfg.delay.move,"link"+_f.act_suffix);});this.observe(_f,"mouseout",function(ev){spa.hide_delay(ev,spa.cfg.delay.hide);});}this.add_link_icon(_f);},add_link_icon:function(_15){var spa=this;if(_15.icon_trigger){var _17=document.createElement("img");_17.style.margin="0 0 0 0";_17.style.padding="1px 0 0 0";_17.style.width="14px";_17.style.height="12px";_17.style.border="0";_17.style.verticalAlign="top";_17.style.background="";_17.style.display="inline";_17.style.fontStyle="normal";_17.style.fontWeight="normal";_17.style.fontFamily="\"trebuchet ms\", arial, helvetica, sans-serif";_17.style.textDecoration="none";_17.style.cssFloat="none !important";_17.style.styleFloat="none";_17.className="snap_preview_icon";_17.src=this.cfg.prefix.theme+"iconLink.gif";_15.appendChild(_17);_17.snap_preview_added="spa";this.observe(_17,"mouseover",function(ev){spa.show_delay(ev,spa.cfg.delay.show,spa.cfg.delay.move,"icon"+_15.act_suffix);});this.observe(_17,"mouseout",function(ev){spa.hide_delay(ev,spa.cfg.delay.hide);});}_15.snap_icon_added="spa";},conditional_add_spa:function(_1a,_1b,_1c){if(_1a.snap_preview_added){return;}else{if(_1a.className.indexOf("snap_nopreview")!=-1){_1a.snap_preview_added="no";return;}}if((_1a.className.indexOf("snap_preview")!==-1)||(_1a.className.indexOf("snap_trigger_icon")!==-1)||(_1a.className.indexOf("snap_trigger_both")!==-1)||((_1a.href.indexOf("https://")!=0)&&(this.cfg.auto_preview||_1b)&&(this.cfg.show_internal||!this.is_internal_link(_1a))&&(this.is_valid_link(_1a)))){_1a.parent_link_icon=_1c;this.add_spa(_1a);}else{_1a.snap_preview_added="no";}},add_link_events:function(){var _1d;var _1e=[];var _1f=[];var _20=[];var _21=["a","area"];if(this.cfg.show_link_icon=="on"){var _22;if(this.cfg.preview_trigger=="icon"){_22=" snap_trigger_icon";}else{_22=" snap_trigger_both";}if(this.cfg.platform=="blogger"){this.cfg.show_link_icon="off";var els=document.getElementsByTagName("div");for(var i=0;i<els.length;i++){if(els[i].className.indexOf("post-body")>-1){els[i].className+=_22;}}}if(this.cfg.platform=="typepad"){this.cfg.show_link_icon="off";var els=document.getElementsByTagName("div");for(var i=0;i<els.length;i++){if(els[i].className.indexOf("entry-body")>-1){els[i].className+=_22;}}}}var _25=[];switch(this.cfg.el_scan){case "all":_25=["*"];break;case "default":_25=["div","span"];break;}for(var tt=0;tt<_25.length;tt++){var els=document.getElementsByTagName(_25[tt]);for(var i=0;i<els.length;i++){if(els[i].tagName!="A"&&els[i].tagName!="AREA"){if(els[i].className.indexOf("snap_nopreview")!=-1){_1e.push(els[i]);}else{if(els[i].className.indexOf("snap_preview")!=-1||els[i].className.indexOf("snap_no_icon")!=-1||els[i].className.indexOf("snap_trigger_icon")!=-1||els[i].className.indexOf("snap_trigger_both")!=-1){_1f.push(els[i]);}}if(this.cfg.show_link_icon&&els[i].className.indexOf("snap_no_icon")!=-1){_20.push(els[i]);}}}}for(var i=0;i<_1e.length;i++){for(var lt=0;lt<_21.length;lt++){_1d=_1e[i].getElementsByTagName(_21[lt]);for(var l=0;l<_1d.length;l++){if(_1d[l].snap_preview_added){continue;}if(_1d[l].className.indexOf("snap_preview")!==-1){this.add_spa(_1d[l]);}else{_1d[l].snap_preview_added="no";}}}}for(var i=0;i<_20.length;i++){for(var lt=0;lt<_21.length;lt++){_1d=_20[i].getElementsByTagName(_21[lt]);for(var l=0;l<_1d.length;l++){if(_1d[l].snap_icon_added){continue;}_1d[l].snap_icon_added="no";}}}for(var i=0;i<_1f.length;i++){var _29="maybe";if(_1f[i].className.indexOf("snap_trigger_icon")!=-1){_29="icon";}if(_1f[i].className.indexOf("snap_trigger_both")!=-1){_29="both";}if(_1f[i].className.indexOf("snap_no_icon")!=-1){_29="no";}for(var lt=0;lt<_21.length;lt++){_1d=_1f[i].getElementsByTagName(_21[lt]);for(var l=0;l<_1d.length;l++){this.conditional_add_spa(_1d[l],true,_29);}}}for(var lt=0;lt<_21.length;lt++){_1d=document.getElementsByTagName(_21[lt]);for(var l=0;l<_1d.length;l++){this.conditional_add_spa(_1d[l],false,false);}}},partial_check:function(){this.clear_timer("partial");if(this.cfg.partial_check.attempts<=0){return;}if(document.getElementsByTagName("body").length){if(!this.div_added){this.add_preview_div();}this.add_link_events();}var spa=this;this.timer_id.partial=window.setTimeout(function(){spa.partial_check();},this.cfg.partial_check.delay);this.cfg.partial_check.attempts--;},onload:function(){this.clear_timer("partial");this.cfg.partial_check.attempts=0;if(!this.div_added){this.add_preview_div();}this.add_link_events();},observe:function(_2b,_2c,_2d){if(_2b.addEventListener){if(_2c=="mousewheel"){_2c="DOMMouseScroll";}_2b.addEventListener(_2c,_2d,false);}else{if(_2b.attachEvent){_2b.attachEvent("on"+_2c,_2d);}}},get_all_spa_nodes:function(_2e,_2f,_30){var els=_2e.getElementsByTagName("*");for(var i=0;i<els.length;i++){if(els[i].id){var _33=els[i].id.match(/^snap_preview_anywhere_(\w+)/);if(_33){_2f[_33[1]]=els[i];}}}return _2f;},is_element:function(el){if((typeof el)=="object"&&el.style){return true;}else{return false;}},set_css:function(){for(var el in this.div){if(!this.is_element(this.div[el])){continue;}this.div[el].style.margin="0 0 0 0";this.div[el].style.padding="0 0 0 0";this.div[el].style.border="0";this.div[el].style.fontStyle="normal";this.div[el].style.fontWeight="normal";this.div[el].style.fontFamily="\"trebuchet ms\", arial, helvetica, sans-serif";this.div[el].style.cssFloat="none";this.div[el].style.styleFloat="none";this.div[el].style.position="static";this.div[el].style.left="auto";this.div[el].style.top="auto";this.div[el].style.zIndex=Number(this.div[el].style.zIndex)+999999;}var _36={x:"left",xr:"right",y:"top",yb:"bottom",w:"width",h:"height"};for(var i in this.cfg.css_pos){if(!this.is_element(this.div[i])){continue;}var pos=this.cfg.css_pos[i];this.div[i].style.position="absolute";for(var _39 in _36){if(((typeof _36[_39])=="string")&&(pos[_39]!==null)&&(pos[_39]!==undefined)){this.div[i].style[_36[_39]]=pos[_39]+"px";}}}if(this.isIE&&document.compatMode&&document.compatMode!="CSS1Compat"){this.div.preview_div.style.width=(this.cfg.css_pos.preview_div.w+4)+"px";this.div.preview_div.style.height=(this.cfg.css_pos.preview_div.h+4)+"px";this.div.search.style.height=(this.cfg.css_pos.search.h+2)+"px";this.div.search.style.width=(this.cfg.css_pos.search.w+2)+"px";}if(document.compatMode&&document.compatMode=="CSS1Compat"){this.div.box.style.height=(this.cfg.css_pos.box.h-5)+"px";this.div.box.style.width=(this.cfg.css_pos.box.w-8)+"px";}for(var i in this.cfg.palette){if(!this.is_element(this.div[i])){continue;}this.div[i].style.backgroundColor="transparent";this.div[i].style.backgroundImage="url("+this.cfg.prefix.theme+this.cfg.theme+"_palette.gif)";this.div[i].style.backgroundPosition=this.cfg.palette[i];this.div[i].style.backgroundRepeat="no-repeat";}this.div.cobrand_img.src=this.cfg.img.cobrand;this.div.submit.src=this.cfg.img.submit;if(this.div.submit.src.match(/\.png/)&&this.needs_png_fix){this.div.submit.runtimeStyle.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+this.div.submit.src+"',sizingMethod='scale')";this.div.submit.src=this.cfg.prefix.image+"t.gif";}this.div.submit.style.backgroundColor="transparent";this.div.box.style.padding="3px 0 0 6px";for(var i in this.cfg.style){if(!this.is_element(this.div[i])){continue;}for(var j in this.cfg.style[i]){if((typeof this.cfg.style[i][j])=="string"){this.div[i].style[j]=this.cfg.style[i][j];}}}for(var i=0;i<this.cfg.hidden.length;i++){if(!this.is_element(this.div[this.cfg.hidden[i]])){continue;}this.div[this.cfg.hidden[i]].style.display="none";}},add_preview_div:function(){if(this.div_added){return;}var _3b=document.getElementsByTagName("html")[0];_3b.style.position="static";this.div.main=document.createElement("div");this.div.main.id="snap_preview_anywhere_main";this.div.main.style.position="absolute";this.div.main.style.visibility="hidden";this.div.main.style.overflow="hidden";var _3c=document.getElementsByTagName("body")[0];_3c.insertBefore(this.div.main,_3c.firstChild);this.div_added=true;this.div.main.innerHTML="<img id=\"snap_preview_anywhere_bg_img\" src=\"http://spa.snap.com/images/t.gif\" />\n<div id=\"snap_preview_anywhere_ether\" style=\"position:static\"><div>&nbsp;</div></div>\n<div id=\"snap_preview_anywhere_body\">\n <a class=\"snap_nopreview\" id=\"snap_preview_anywhere_close_a\" href=\"options\"></a>\n <a class=\"snap_nopreview\" id=\"snap_preview_anywhere_ques_a\" href=\"options\" alt=\"Snap Preview Anywhere Options\" title=\"Snap Preview Anywhere Options\">Options</a>\n <div id=\"snap_preview_anywhere_url\" style=\"white-space:nowrap\"><a class=\"snap_nopreview\" id=\"snap_preview_anywhere_url_a\" href=\"#\">#</a></div>\n <div id=\"snap_preview_anywhere_preview_div\"><a class=\"snap_nopreview\" id=\"snap_preview_anywhere_img_a\" href=\"#\"><img id=\"snap_preview_anywhere_preview\" src=\"http://spa.snap.com/images/t.gif\" /><img id=\"snap_preview_anywhere_loading_img\" src=\"http://spa.snap.com/images/loading.gif\" /></a></div>\n <div id=\"snap_preview_anywhere_search\">\n  <form id=\"snap_preview_anywhere_search_form\" action=\"#\" method=\"GET\" accept-charset=\"UTF8\" target=\"_blank\">\n   <input id=\"snap_preview_anywhere_box\" type=\"text\" name=\"query\" autocomplete=\"off\" />\n   <input type=\"image\" name=\"snap_preview_anywhere_submit\" id=\"snap_preview_anywhere_submit\" alt=\"Submit your search\" title=\"Submit your search\" />\n  </form>\n </div>\n <iframe id=\"snap_preview_anywhere_spasense_iframe\" frameborder=\"no\" scrolling=\"no\" src=\"\"></iframe>\n <img id=\"snap_preview_anywhere_cobrand_img\" src=\"http://spa.snap.com/images/t.gif\"/>\n <a class=\"snap_nopreview\" id=\"snap_preview_anywhere_cobrand_a\" href=\"\" target=\"_blank\"></a>\n <a class=\"snap_nopreview\" id=\"snap_preview_anywhere_logo_a\" href=\"\" target=\"_blank\"></a>\n</div>\n<div id=\"snap_preview_anywhere_options\">\n <a class=\"snap_nopreview\" id=\"snap_preview_anywhere_option_a\" href=\"close\" alt=\"Close Snap Preview Anywhere Options\" title=\"Close Snap Preview Anywhere Options\">Close&nbsp;Options</a>\n <iframe id=\"snap_preview_anywhere_option_iframe\" width=\"265\" height=\"190\" frameborder=\"0\" scrolling=\"no\" src=\"\" /></iframe>\n</div>\n";this.get_all_spa_nodes(this.div.main,this.div);this.set_css();this.raise_loading_img();this.observe(this.div.main,"mouseover",function(ev){spa.highlight(true);});this.observe(this.div.main,"mouseout",function(ev){var _3f=ev.relatedTarget||ev.toElement;if(_3f==null){return;}if(spa.isOpera){var top=spa.getTop(spa.div.main);var _41=spa.getLeft(spa.div.main);var _42=spa.getBottom(spa.div.main);var _43=spa.getRight(spa.div.main);var _44=ev.pageX||(ev.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft));var _45=ev.pageY||(ev.clientY+(document.documentElement.scrollTop||document.body.scrollTop));var _46=(_44>_41&&_44<_43&&_45>top&&_45<_42);if(_46){return;}}spa.highlight(false);spa.hide_delay(ev,100);});var spa=this;this.observe(this.div.preview,"load",function(ev){spa.check_image_status(ev);});this.observe(this.div.ether,"mouseover",function(ev){spa.highlight(false);spa.hide_delay(ev,100);if(ev.preventDefault){ev.preventDefault();ev.stopPropagation();ev.returnValue=false;ev.cancelBubble=true;}else{ev.returnValue=false;ev.cancelBubble=true;}});spa.opt_url=this.cfg.prefix.options+"options.php?source="+encodeURIComponent(this.cfg.source)+"&key="+this.cfg.key+"&sb="+(this.cfg.search_box?"1":"0")+"&th="+this.cfg.theme;this.observe(this.div.option_iframe,"mouseout",function(_4a){_4a.returnValue=false;_4a.cancelBubble=true;});this.observe(this.div.ques_a,"click",function(ev){return spa.option_frame(ev,true,false);});this.observe(this.div.close_a,"click",function(ev){return spa.option_frame(ev,true,true);});this.observe(this.div.option_a,"click",function(ev){return spa.option_frame(ev,false,false);});this.observe(this.div.ques_a,"mouseover",function(ev){spa.div.ques_a.style.borderBottom="none";});this.observe(this.div.ques_a,"mouseout",function(ev){spa.div.ques_a.style.borderBottom="1px dotted "+spa.cfg.color.options;});this.observe(this.div.option_a,"mouseover",function(ev){spa.div.option_a.style.borderBottom="none";});this.observe(this.div.option_a,"mouseout",function(ev){spa.div.option_a.style.borderBottom="1px dotted "+spa.cfg.color.options;});this.observe(this.div.url_a,"mouseover",function(ev){spa.div.url_a.style.borderBottom="none";});this.observe(this.div.url_a,"mouseout",function(ev){spa.div.url_a.style.borderBottom="1px dotted "+spa.cfg.color.url;});var _54=["img_a","url_a"];for(var i=0;i<_54.length;i++){this.observe(this.div[_54[i]],"click",function(ev){spa.link_click("click");});}this.observe(document,"mousewheel",function(ev){spa.disabled=true;clearTimeout(spa.disableTimer);spa.disableTimer=window.setTimeout(function(){spa.disabled=false;},200);});this.observe(this.div.search_form,"submit",function(ev){spa.form_submit(ev);});this.div.box.value=this.cfg.text.search_box;this.observe(this.div.box,"focus",function(ev){if(spa.div.box.value===spa.cfg.text.search_box){spa.div.box.value="";}});var _5a="?source="+encodeURIComponent(this.cfg.source)+"&campaign=";this.div.logo_a.href=this.cfg.href.logo+_5a+this.campaign("bsblogo");this.div.cobrand_a.href=this.cfg.href.cobrand;if(this.div.cobrand_a.href.indexOf(this.cfg.prefix.snap)==0){this.div.cobrand_a.href+=_5a+this.campaign("link");}this.div.search_form.action=this.cfg.prefix.search;var el=document.createElement("input");el.type="hidden";el.name="source";el.value=encodeURIComponent(this.cfg.source);this.div.search_form.appendChild(el);var el=document.createElement("input");el.type="hidden";el.name="campaign";el.value="";this.div.search_form.appendChild(el);this.div.form_campaign=el;this.orientation("bl");},option_frame:function(ev,_5d,_5e){this.div.body.style.display=_5d?"none":"inline";this.div.options.style.display=_5d?"inline":"none";if(_5d){var url=this.opt_url+(_5e?"&hl=disable":"");if(this.div.option_iframe.src!=url){this.div.option_iframe.src=url;}}ev.returnValue=false;if(ev.preventDefault){ev.preventDefault();}return false;},raise_loading_img:function(){this.div.loading_img.style.zIndex=Number(this.div.preview.style.zIndex)+10;},lower_loading_img:function(){this.div.loading_img.style.zIndex=Number(this.div.preview.style.zIndex)-10;},move:function(x,y){this.div.main.style.left=x+"px";this.div.main.style.top=y+"px";},hide_delay:function(ev,_63){this.clear_timer("show");var spa=this;this.timer_id.show=window.setTimeout(function(){spa.hide();},_63);},hide:function(){if(this.div.options.style.display!="none"){this.div.options.style.display="none";this.div.body.style.display="inline";}this.div.main.style.visibility="hidden";},show_delay:function(ev,_66,_67,_68){this.clear_timer("show");if(this.disabled){return;}var _69;if(ev.srcElement){_69=ev.srcElement;}else{if(ev.target){_69=ev.target;}}if(_69.className=="snap_preview_icon"&&_68=="link2"){_68="icon2";}var ex=this.getPageX(ev);var ey=this.getPageY(ev);var _6c=this.getViewportWidth();var _6d=this.getViewportHeight();if((/Safari|Konqueror|KHTML/gi).test(navigator.userAgent)){var _6e=ev.pageX-window.pageXOffset;var _6f=ev.pageY-window.pageYOffset;var _70=(_6f>(_6d/2))?"b":"t";_70+=(_6e>(_6c/2))?"r":"l";}else{var _70=(ev.clientY>(_6d/2))?"b":"t";_70+=(ev.clientX>(_6c/2))?"r":"l";}var _71=null;if(_69){var _72=_69;for(var i=0;(i<5)||(!_72);i++){if((_72.tagName=="A"||_72.tagName=="AREA")&&_72.href){_71=_72;break;}_72=_72.parentNode;}}if(_71){var spa=this;if(!this.is_valid_link(_71)){return;}if(this.div.main.style.visibility!="visible"){this.timer_id.show=window.setTimeout(function(){spa.show(_71,ex,ey,_70,_69,_68);},_66);}else{if(!_69||(this.current_element!=_69)){this.timer_id.show=window.setTimeout(function(){spa.show(_71,ex,ey,_70,_69,_68);},_67);}}}},show:function(_75,ex,ey,_78,_79,_7a){if(this.div.url_a.href!=_75.href){this.raise_loading_img();}if(!_78){_78=this.current_orientation;}this.orientation(_78);this.div.box.value=this.cfg.text.search_box;this.div.box.blur();var spa=this;window.setTimeout(function(){spa.show_part2(_75,ex,ey,_78,_79,_7a);},0);var _7c=this.cfg.prefix.spasense+"spasense.php?key="+this.cfg.key+"&url="+_75.href+"&cp="+this.campaign("spasense")+"&src="+encodeURIComponent(this.cfg.source);if(this.cfg.search_type=="spasense"&&this.cfg.search_box==true){if(this.div.spasense_iframe.src!=_7c){this.div.spasense_iframe.src=_7c;}}else{this.div.spasense_iframe.src="";}},show_part2:function(_7d,ex,ey,_80,_81,_82){this.preview_url(_7d,_82);var pad=5;if(_80.substr(0,1)=="b"){ey-=(this.div.main.offsetHeight+pad);}else{ey+=pad;}if(_80.substr(1,1)=="r"){ex-=this.div.main.offsetWidth;}this.move(ex,ey);this.current_element=_81;this.div.main.style.visibility="visible";},orientation:function(_84,_85){var _86=this.cfg.prefix.bg;switch(_84){case "bl":this.div.body.style.top=this.cfg.offset.body.bottom+"px";this.div.options.style.top=this.cfg.offset.options.bottom+"px";break;case "br":this.div.body.style.top=this.cfg.offset.body.bottom+"px";this.div.options.style.top=this.cfg.offset.options.bottom+"px";break;case "tl":this.div.body.style.top=this.cfg.offset.body.top+"px";this.div.options.style.top=this.cfg.offset.options.top+"px";break;case "tr":this.div.body.style.top=this.cfg.offset.body.top+"px";this.div.options.style.top=this.cfg.offset.options.top+"px";break;default:return;break;}this.div.ether.style.left=this.cfg.ether[_84].x+"px";this.div.ether.style.top=this.cfg.ether[_84].y+"px";_86+="_"+_84;_86+=(_85?"_d.png":".png");if(this.needs_png_fix){this.div.bg_img.runtimeStyle.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+_86+"',sizingMethod='scale')";}else{this.div.main.style.background="url("+_86+")";}this.current_orientation=_84;},highlight:function(_87){this.clear_timer("show");this.orientation(this.current_orientation,_87);},preview_url:function(_88,_89){var url=_88.href;var _8b=_88.target;this.current_url=url;this.div.url_a.href=url;this.div.url_a.target=_8b;this.div.img_a.href=url;this.div.img_a.target=_8b;if(this.cfg.redirect_param){var _8c="[\\?&]"+this.cfg.redirect_param+"=([^&#]*)";var _8d=new RegExp(_8c);var _8e=_8d.exec(url);if(_8e==null){this.div.url_a.innerHTML=url.replace(/\w+:\/\/(www\.)?/,"");}else{this.div.url_a.innerHTML=_8e[1].replace(/(\w+:\/\/)?(www\.)?/,"");url=_8e[1];}}else{this.div.url_a.innerHTML=url.replace(/\w+:\/\/(www\.)?/,"");}var m=url.match(/\w+:\/\/([^\/]*)/);if(m){this.div.preview.title="Go to "+m[1];this.div.loading_img.title="Go to "+m[1];}else{this.div.preview.title="";this.div.loading_img.title="";}this.clear_timer("retry");if(this.retry_url_list[url]){this.div.preview.src=this.retry_url_list[url];}else{this.div.preview.src=this.cfg.prefix.preview+"preview/?url="+encodeURIComponent(url)+"&key="+this.cfg.key+"&src="+encodeURIComponent(this.cfg.source)+"&cp="+this.campaign("preview")+"&sb="+(this.cfg.search_box?"1":"0")+"&v="+this.cfg.version+"&act="+_89;}},link_click:function(_90){switch(_90){case "click":var _91=this.cfg.prefix.preview+"explore/"+Math.floor((Math.random()*100000))+"/?url="+encodeURIComponent(this.current_url)+"&key="+this.cfg.key+"&src="+encodeURIComponent(this.cfg.source)+"&cp="+this.campaign("redir");this.div.url_a.href=_91+"&tol=url";this.div.img_a.href=_91+"&tol=image";break;}},check_image_status:function(ev){this.lower_loading_img();if(this.div.preview.width==274){var _93=1;var url=this.div.preview.src;var _95=/retry=(\d+)/;var _96=url.match(_95);if(_96){_93=Number(_96[1])+1;url=url.replace(_95,"retry="+_93);}else{url+="&retry="+_93;}if(_93>this.cfg.retry_interval.length){return;}if(_93==this.cfg.retry_interval.length){url+="&final=1";}this.retry_url_list[this.div.url_a.href]=url;if(this.div.main.style.visibility=="visible"){var spa=this;var _98=this.cfg.retry_interval[_93-1];this.clear_timer("retry");this.timer_id.retry=window.setTimeout(function(){spa.div.preview.src=url;},_98);}}},form_submit:function(ev){var _9a=false;if(this.div.box.value===this.cfg.text.search_box){this.div.form_campaign.value=this.campaign("defaulttext");_9a=true;}else{if(this.div.box.value===""){this.div.form_campaign.value=this.campaign("emptybox");_9a=true;}else{this.div.form_campaign.value=this.campaign("bsb");}}if(_9a){var _9b=this.cfg.prefix.search+"?source="+encodeURIComponent(this.cfg.source)+"&campaign="+this.div.form_campaign.value;if(this.cfg.search_type=="image"){_9b+="&query=sunflower";}window.open(_9b,"_blank");ev.returnValue=false;if(ev.preventDefault){ev.preventDefault();}return false;}},needs_png_fix:(navigator.userAgent.match(/msie (5\.5|6)/i)&&navigator.platform=="Win32"),isFirefox:(navigator.userAgent.match(/firefox/i)),yahoo_yui_section_being:function(){"The following section of code adapted from the Yahoo YUI Library";"    Copyright (c) 2006, Yahoo! Inc. All rights reserved.";"    Code licensed under the BSD License:";"    http://developer.yahoo.net/yui/license.txt";"    Version: 0.11.4";},isSafari:(/Safari|Konqueror|KHTML/gi).test(navigator.userAgent),isIE:(!this.isSafari&&!navigator.userAgent.match(/opera/gi)&&navigator.userAgent.match(/msie/gi)),isOpera:(navigator.userAgent.match(/Opera/gi)),getPageX:function(ev){var x=ev.pageX;if(!x&&0!==x){x=ev.clientX||0;if(this.isIE){x+=this._getScrollLeft();}}return x;},getPageY:function(ev){var y=ev.pageY;if(!y&&0!==y){y=ev.clientY||0;if(this.isIE){y+=this._getScrollTop();}}return y;},_getScrollLeft:function(){return this._getScroll()[1];},_getScrollTop:function(){return this._getScroll()[0];},_getScroll:function(){var dd=document.documentElement,db=document.body;if(dd&&(dd.scrollTop||dd.scrollLeft)){return [dd.scrollTop,dd.scrollLeft];}else{if(db){return [db.scrollTop,db.scrollLeft];}else{return [0,0];}}},getViewportHeight:function(){var _a1=-1;var _a2=document.compatMode;if((_a2||this.isIE)&&!this.isOpera){switch(_a2){case "CSS1Compat":_a1=document.documentElement.clientHeight;break;default:_a1=document.body.clientHeight;}}else{_a1=self.innerHeight;}return _a1;},getViewportWidth:function(){var _a3=-1;var _a4=document.compatMode;if(_a4||this.isIE){switch(_a4){case "CSS1Compat":_a3=document.documentElement.clientWidth;break;default:_a3=document.body.clientWidth;}}else{_a3=self.innerWidth;}return _a3;},getWidth:function(_a5){if(_a5==document.body||_a5==document||_a5==window){return window.getWidth();}else{if(_a5){var _a6=parseInt(_a5.offsetWidth);return (_a6==0)?parseInt(_a5.style.width):_a6;}else{return null;}}},getHeight:function(_a7){if(_a7==document.body||_a7==document||_a7==window){return window.getHeight();}else{if(_a7){var _a8=parseInt(_a7.offsetHeight);return (_a8==0)?parseInt(_a7.style.height):_a8;}else{return null;}}},getLeft:function(_a9){return _a9.offsetLeft;},getRight:function(_aa){return this.getLeft(_aa)+this.getWidth(_aa);},getTop:function(_ab){return _ab.offsetTop;},getBottom:function(_ac){return this.getTop(_ac)+this.getHeight(_ac);},trim:function(str){return str.replace(/^\s*|\s*$/g,"");},yahoo_yui_section_end:function(){"End Yahoo YUI Library adapted code section";},log:function(msg,obj){if(!this.isFirefox||typeof console=="undefined"){return;}if(obj){console.log(msg,obj);}else{console.log(msg);}}};var snap_preview_anywhere=new snapPreviewAnywhere();